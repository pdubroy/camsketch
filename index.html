<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Hello React!</title>
  <!--
  <script src="node_modules/react/dist/react.js"></script>
  <script src="node_modules/babel-core/browser.min.js"></script>
  -->
  <style>
    html, body {
      margin: 0;
      padding: 0;
    }
    body {
      overflow: hidden;
    }
    canvas {
      background-color: transparent;
      cursor: crosshair;
    }
  </style>
</head>
<body>
  <canvas>
  </canvas>
  <script>
    var canvas = document.querySelector('canvas');
    var ctx = canvas.getContext('2d');

    function isTouchDevice() {
      return 'ontouchstart' in window ||
             !!(window.DocumentTouch && document instanceof DocumentTouch);
    }

    function handleResize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    function handleTouchStart(e) {
      ctx.beginPath();
      ctx.lineCap = 'round';
      ctx.lineWidth = 8;
      ctx.moveTo(e.clientX, e.clientY);
    }

    function handleTouchMove(e) {
      ctx.lineTo(e.clientX, e.clientY);
      ctx.stroke();
    }

    function handleTouchEnd(e) {
      ctx.closePath();
    }

    (function main() {
      window.addEventListener('resize', handleResize);
      handleResize();

      if (isTouchDevice()) {
        canvas.ontouchstart = function(e) {
          if (e.touches.length === 1) {
            handleTouchStart(e.touches[0]);
          }
        };
        canvas.ontouchmove = function(e) {
          if (e.touches.length === 1) {
            handleTouchMove(e.touches[0]);
            e.preventDefault();
          }
        };
        canvas.ontouchend = function(e) {
          handleTouchEnd(e.touches[0]);
        };
      } else {
        var drawing = false;
        canvas.onmousedown = function(e) {
          drawing = true;
          handleTouchStart(e);
        }
        canvas.onmousemove = function(e) {
          if (drawing) {
            handleTouchMove(e);
          }
        }
        canvas.onmouseup = function(e) {
          drawing = false;
          handleTouchEnd(e);
        }
      }
    })();
  </script>
</body>
</html>